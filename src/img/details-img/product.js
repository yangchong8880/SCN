String.implement({toFormElements:function(){if(!this.contains("=")&&!this.contains("&")){return new Element("input",{type:"hidden"})}var elements=[];var queryStringHash=this.split("&");$A(queryStringHash).each(function(item){if(item.contains("=")){item=$A(item.split("="));elements.push(new Element("input",{type:"hidden",name:item[0],value:item[1]}))}else{elements.push(new Element("input",{type:"hidden",name:item}))}});return new Elements(elements)}});Number.implement({interzone:function(min,max){var _v=this.toFloat();if(!_v){_v=0}return _v>=min&&_v<=max}});var MiniSize=new Object();var shope_type="";var miniSkomartSizeDialog;MiniSize={show:function(from,options){var remoteURL=from?from:encodeURI($("size_temple_mode").get("action_src"));var params="";if(shope_type){params+="shope_type="+shope_type+"&"}var goods_brand_id=$("goods_brand_id").value;goods_brand_id?params+="brand_id="+goods_brand_id+"&":"";var prosizearray=$("prosizearray").value;prosizearray?params+="prosizearray="+$("prosizearray").value+"&":"";var goods_type_name=$("goods_type_name")?$("goods_type_name").value:"";goods_type_name?params+="good_type="+goods_type_name+"&":"";if(options){params+="size="+options.size}miniSkomartSizeDialog.getElement(".size_temple").show();miniSkomartSizeDialog.getElement(".showBtn").hide();this.request=new Request.HTML({update:miniSkomartSizeDialog.getElement(".size_temple").set("html",'<div class="showBox"> <div class="clfix" style="border:2px solid #f60;padding:0 0 5px 5px;border-right:0;"> <img class="close fr" style="cursor:pointer" src="http://images.s.cn/images/scn2012/cm_closebtn.png"> <div style="padding:2px 0 3px;height:19px">&nbsp;&nbsp;正在加载...</div></div></div></div>'),onComplete:function(){MiniSize.onload()}}).get(encodeURI(remoteURL+"?"+params))},hide:function(chain){miniSkomartSizeDialog.getElement(".size_temple").hide();miniSkomartSizeDialog.getElement(".showBtn").show()},updatesize:function(size){if(miniSkomartSizeDialog.getElement(".size_temple").style.display!="none"){var options_info=size;size=size?(size+"码"):"";if($("sizevalue")){$("sizevalue").set("text",size)}else{options_info?options_info={"size":options_info}:"";MiniSize.show("",options_info)}}},showdiv:function(size){miniSkomartSizeDialog.getElement(".size_temple").show();miniSkomartSizeDialog.getElement(".showBtn").hide();MiniSize.updatesize(size)},onload:function(){if(miniSkomartSizeDialog.getElement(".close")){miniSkomartSizeDialog.getElement(".close").addEvent("click",function(){MiniSize.hide()})}if(miniSkomartSizeDialog.getElement(".showBtn")){miniSkomartSizeDialog.getElement(".showBtn").addEvent("click",function(){if(size_spec=$E("#goods-spec .spec-item a.selected[size_id]")){var size=size_spec.getElement("span").get("text")}MiniSize.showdiv(size)})}}};function openwindow(service_links,window_height,window_width){service_links=service_links?service_links:"http://b.qq.com/webc.htm?new=0&sid=800020033&o=skomart.com&q=7";window_height=window_height?window_height:"544";window_width=window_width?window_width:"700";window.open(service_links,"_blank","height="+window_height+", width="+window_width+",toolbar=no,scrollbars=no,menubar=no,status=no")}function check_tf(cid,type){var t_count=$ES("#t_count_"+cid).get("text");var f_count=$ES("#f_count_"+cid).get("text");var number=Cookie.get("S[COMMENT_TRUE_NUMBER_"+cid+"]");if(number){return false}var AskUpdateRequest=new Request({method:"post",url:"/comment-SetAskTfVal.html",data:{"comment_id":cid,"type":type},onSuccess:function(responseText){if(responseText=="success"){if(type=="T"){$ES("#t_count_"+cid).set("text",parseInt(t_count)+1);$ES("#t_count_btn_"+cid).setProperty("disabled","disabled")}}},onFailure:function(){MessageBox.success("提交失败")}});AskUpdateRequest.send()}function updateGoodsStatus(){var goods_id=this.goodsId;var ajaxUpdateRequest=new Request({method:"post",url:"synchronize-updateGoodsStatus.html",data:{"goods_id":goods_id},onSuccess:function(responseText){if(responseText=="error"||responseText=="noneed"||responseText=="update"){$clear(periodicalFunctionVar)}if(responseText=="update"){window.location.reload()}},onFailure:function(){$clear(periodicalFunctionVar)}});ajaxUpdateRequest.send()}function hover(id,name){id.addEvent("mouseenter",function(){id.addClass(name)});id.addEvent("mouseleave",function(){id.removeClass(name)})}function getStore(){return $E("#goods-viewer .buyinfo .store").get("text").toInt()}function commentGoods(gid,e){if(Cookie.get("S[MEMBER]")){var comments=new Request({method:"post",url:"member-commentGoods.html",data:{"goods_id":gid},onSuccess:function(responseText){result=eval("("+responseText+")");if(result.staus=="discusserror"){var s_top=window.innerWidth?window.pageYOffset:document.documentElement.scrollTop;$("discuss-form").setStyles({"top":150+s_top,"display":"","left":(document.body.offsetWidth-570)/2})}else{if(result.staus=="success"&&result.pid&&result.oid){toshowpage(result.com_url)}else{MessageBox.success("数据请求失败")}}},onFailure:function(){MessageBox.success("提交失败")
}});comments.send()}}function toshowpage(url){window.open(url)}function GetCommentFaq(cid){for(var i=1;i<=4;i++){if(cid==i){$$(".show_faq_"+cid).setStyle("display","")}else{$$(".show_faq_"+i).setStyle("display","none")}}}var updatepic=function(vids){if(!vids){return $$(".goods-detail-pic-thumbnail td[img_id]").each(Element.show)}vids=vids.split(",");var pointer=false;$$(".goods-detail-pic-thumbnail td[img_id]").each(function(i){if(vids.contains(i.get("img_id"))){i.removeProperty("style");if(!pointer){i.getElement("a").fireEvent("click",{stop:$empty});pointer=true}}else{i.style.display="none"}})};window.addEvent("domready",function(e){if($("botBuyNav")){botBuyNavHeight=$("botBuyNav").getStyle("height").toInt();var botBuyNavWeight=window.getSize().x;div_top=600;$backToTopFunp=function(){var stp=document.getScroll().y,winhp=window.getSize().y;if(stp>div_top){$$(".botBuyNav").setStyle("visibility","visible")}else{$$(".botBuyNav").setStyle("visibility","hidden")}if(!window.XMLHttpRequest){$$(".botBuyNav").setStyle("top",stp+winhp-botBuyNavHeight);$$(".botBuyNav").setStyle("width",botBuyNavWeight)}};window.addEvents({scroll:$backToTopFunp,domready:$backToTopFunp})}if(formtocart=$E("form[target=_dialog_minicart]")){formtocart.addEvent("submit",function(e){e.stop();miniCart.load([{url:this.action,method:this.method,data:this,target:this.getElement("input[value=加入购物车]")}])})}try{var viewTabsContainer=$E("#goods-viewer .goods-detail-tab");var viewTabs=[];var viewSections=$$("#goods-viewer .section");viewSections.each(function(se){var t=new Element("div",{"class":"goodsDetailTab"}).set("html","<span>"+se.get("tab")+"</span>");viewTabs.push(t)});viewTabsContainer.adopt(viewTabs);new ItemAgg(viewTabs,viewSections,{activeName:"active",onActive:function(tab,item){var anotherItems=$$($A(this.items).remove(item));$A(anotherItems).each(function(ags,index){if(ags.get("class")=="section shopensure"||ags.get("class")=="section changgoods"||ags.get("class")=="section commonques"){anotherItems=$$($A(anotherItems).remove(ags))}});
/* @end */
if(tab.getElement("span").get("text")=="购物保障"){$("shopensure").set("src","http://images.s.cn/images/2012/980/viewgoodpic.jpg")}if(tab.getElement("span").get("text")=="放心退换货"){$("changgoods").set("src","http://images.s.cn/images/2012/980/viewgoodpic2.jpg")}if(tab.getElement("span").get("text")=="常见问题"){$("commonques").set("src","http://images.s.cn/images/2012/980/viewgoodpic3.jpg");
/* @end */
}if(tab.getElement("span").get("text")=="商品详情"){anotherItems.show()}else{anotherItems.hide()}}})}catch(e){}$$(".addcomment .title input").addEvents({"focus":function(){this.removeClass("blur")},"blur":function(){this.addClass("blur")}});miniSkomartSizeDialog=$("size_temple_mode");if($("proforsize")&&miniSkomartSizeDialog){shope_type=$("proforsize").value}if(shope_type){miniSkomartSizeDialog.getElement(".showBtn").show();MiniSize.onload.call(MiniSize)}if(!Cookie.get("S[MEMBER]")){texts="请登录名鞋库后发表咨询\r\n"}else{texts=""}texts=texts+default_str;$ES("#comment_temp").set("value",default_str);$ES("#inputstyle").set("text",texts);$ES("#inputstyle").addEvent("focus",function(){cur_text=$ES("#inputstyle").get("text");if(cur_text==texts){this.set("text","")}});$ES("#inputstyle").addEvent("blur",function(){cur_text=$ES("#inputstyle").get("text");if(cur_text==""){this.set("text",texts)}});$ES("#inputstyle").addEvent("keyup",function(){str=this.get("value");$ES("#comment_temp").set("value",str)})});